<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-03-02
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150302" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Lens &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".././" id="bannerLeft">
                                                                                                <img src="../images/apache-lens-logo.png"  alt="Lens Analytics Platform" height="54px"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://incubator.apache.org" id="bannerRight">
                                                                                                <img src="../images/apache-incubator-logo.png"  alt="Apache Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org" class="externalLink" title="Apache">
        Apache</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href=".././" title="Lens">
        Lens</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2015-03-02</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 2.1.0-inm</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Lens</li>
                                
      <li>
    
                          <a href="../index.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                  
      <li>
    
                          <a href="../lenshome/quick-start.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                  
      <li>
    
                          <a href="../lenshome/install-and-run.html" title="Installing and Running Lens">
          <i class="none"></i>
        Installing and Running Lens</a>
            </li>
                  
      <li>
    
                          <a href="../lenshome/pseudo-distributed-setup.html" title="Pseudo Distributed Setup">
          <i class="none"></i>
        Pseudo Distributed Setup</a>
            </li>
                              <li class="nav-header">Releases</li>
                                
      <li>
    
                          <a href="../releases/download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                  
      <li>
    
                          <a href="../releases/compatibility.html" title="Compatibility">
          <i class="none"></i>
        Compatibility</a>
            </li>
                  
      <li>
    
                          <a href="../releases/release-history.html" title="All Releases">
          <i class="none"></i>
        All Releases</a>
            </li>
                              <li class="nav-header">User Documentation</li>
                                
      <li>
    
                          <a href="../user/index.html" title="Lens User Guide">
          <i class="none"></i>
        Lens User Guide</a>
            </li>
                  
      <li>
    
                          <a href="../user/olap-cube.html" title="OLAP data cube">
          <i class="none"></i>
        OLAP data cube</a>
            </li>
                  
      <li>
    
                          <a href="../rest.html" title="REST API">
          <i class="none"></i>
        REST API</a>
            </li>
                  
      <li>
    
                          <a href="../user/cli.html" title="Lens CLI">
          <i class="none"></i>
        Lens CLI</a>
            </li>
                  
      <li>
    
                          <a href="../user/java-client.html" title="Java Client Library">
          <i class="none"></i>
        Java Client Library</a>
            </li>
                  
      <li>
    
                          <a href="../user/jdbc-client.html" title="JDBC Client">
          <i class="none"></i>
        JDBC Client</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Lens ML</a>
          </li>
                  
      <li>
    
                          <a href="../user/faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Developer Documentation</li>
                                
      <li>
    
                          <a href="../developer/contribute.html" title="Contributor Guide">
          <i class="none"></i>
        Contributor Guide</a>
            </li>
                  
      <li>
    
                          <a href="../developer/commit.html" title="Committer Guide">
          <i class="none"></i>
        Committer Guide</a>
            </li>
                  
      <li>
    
                          <a href="../developer/design.html" title="Lens Design">
          <i class="none"></i>
        Lens Design</a>
            </li>
                  
      <li>
    
                          <a href="../developer/driver.html" title="Driver Developer Guide">
          <i class="none"></i>
        Driver Developer Guide</a>
            </li>
                              <li class="nav-header">Admin Documentation</li>
                                
      <li>
    
                          <a href="../admin/index.html" title="Admin Overview">
          <i class="none"></i>
        Admin Overview</a>
            </li>
                  
      <li>
    
                          <a href="../admin/deployment.html" title="Deployment">
          <i class="none"></i>
        Deployment</a>
            </li>
                  
      <li>
    
                          <a href="../admin/config-server.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                  
      <li>
    
                          <a href="../admin/cli.html" title="Admin CLI">
          <i class="none"></i>
        Admin CLI</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                      
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                    
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="http://www.apache.org/" title="ASF" class="builtBy">
        <img class="builtBy"  alt="ASF" src="../images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!--  --><!-- Licensed to the Apache Software Foundation (ASF) under one --><!-- or more contributor license agreements.  See the NOTICE file --><!-- distributed with this work for additional information --><!-- regarding copyright ownership.  The ASF licenses this file --><!-- to you under the Apache License, Version 2.0 (the --><!-- "License"); you may not use this file except in compliance --><!-- with the License.  You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, --><!-- software distributed under the License is distributed on an --><!-- "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY --><!-- KIND, either express or implied.  See the License for the --><!-- specific language governing permissions and limitations --><!-- under the License. --><!--  --><div class="section">
<h2><a name="Lens_API_for_Machine_Learning_Lens-ML"></a>Lens API for Machine Learning (Lens-ML)</h2>
<p>Please Note - This is an experimental feature - API is subject to change</p>
<div class="section">
<h3><a name="Introduction"></a>Introduction</h3>
<p>The Lens-ML component allows users to call machine learning libraries as UDFs in Lens queries. At present, we integrate the MLLib library provided in Apache Spark.</p>
<p>With this feature, users can build machine learning models backed by Hive tables, and later call these models via Hive UDFs. Actual model building is done in Spark. Lens takes care of initializing and invoking the Spark code (Lens acts as a Spark shell).</p></div>
<div class="section">
<h3><a name="Lens-ML_Server_API"></a>Lens-ML Server API</h3>
<p>The Lens-ML component provides a set of REST endpoints for listing, creation and validation of machine learning models and algorithms. Some of them are described below</p>
<ul>
<li>/ml/algorithms - give a list of machine learning algorithms which are supported by Lens</li>
<li>/ml/train - Create a model using an algorithm and backed by a Hive table. This also takes parameters such as list of columns which act as feature variables, name of label column (in case of supervised learning) and algorithm specific tuning parameters. This call creates a Spark RDD backed by the Hive table using HCatInputFormat, and runs corresponding trainer in Spark. The eventual model object returned by the Spark environment is associated with a unique ID, and is persisted to HDFS.</li>
<li>/ml/test - Evaluate a model created in the /train call against a Hive table, and store results into another Hive table. This call takes the model ID, and a Hive table which is used for evaluation purposes. It is assumed that the evaluation table contains all columns (feature and label columns) which were used to generate the model. It creates a Lens query against the evaluation table and applies the model UDF on each record in the table. Output of the query is associated with a test report ID, and stored as a partition (with the same ID) in an output table. This call returns the report ID to the user.</li>
<li>/ml/models - Retrieve model metadata for an algorithm and by model ID</li>
<li>/ml/reports - Retrieve model evaluation reports by algorithm or report ID</li></ul></div>
<div class="section">
<h3><a name="Lens-ML_Client_API"></a>Lens-ML Client API</h3>
<p>We also provide a client library to call the server side REST api. The LensML interface can be used to invoke server side REST APIs. The same interface can also be used by other Lens server modules to invoke these APIs in the Lens server process itself. To access an instance of the Lens-ML service in the Lens server, user can use the ServiceProvider interface.</p></div>
<div class="section">
<h3><a name="Model_UDF"></a>Model UDF</h3>
<p>Each train call creates an ML model which can be identified by a unique ID. This model can be invoked in any Hive query using the predict UDF. This UDF take the model ID and feature and label column names. Once a model is generated it can be invoked in any Lens query (at the time of writing only queries which run on the Hive backend are supported) without having to invoke Spark again.</p></div>
<div class="section">
<h3><a name="Deployment"></a>Deployment</h3>
<ul>
<li>Enable the ML service by adding it to the list of services brought up by lens-server. (lens.server.servicenames)</li>
<li>Enable the ML resource by adding it to the list of resources brought up by lens-server (lens.server.ws.resourcenames)</li>
<li>Lens-ML specific configuration -</li>
<li>ML Driver - lens.ml.drivers - Currently only org.apache.lens.ml.spark.SparkMLDriver is available.</li>
<li>Spark master setting - lens.ml.sparkdriver.spark.master - Specify the mode in which Spark will be invoked this can take values acceptable by the Spark master config variable in Apache Spark (for local, standalone, and Yarn modes)
<p>An example config is provided in lens-ml-lib/resources/test/lens-site.xml</p>
<p>Spark dependencies need to be provided at run time when starting the Lens server. Care should be taken to make sure that the Spark version matches with the Hadoop and Hive versions used to build Apache Lens. Users may have to rebuild Spark for their version of Hadoop. SPARK_HOME environment variable should be set which points to the Spark installation.</p></li></ul></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2014-2015
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
