<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2014-10-15 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Lens - </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20141015" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://inmobi.github.io/grill" id="bannerLeft">
                                        <img src="http://inmobi.github.io/grill/grill-logo.png" alt="Lens Analytics Platform for InMobi" title="Lens Analytics Platform" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
                                  <a href="../.." title="InMobi">InMobi</a>
        &gt;
                          <a href=".././" title="Lens">Lens</a>
        &gt;
    
      </div>
            <div class="xright">        
                    
                 <span id="publishDate">Last Published: 2014-10-15</span>
              &nbsp;| <span id="projectVersion">Version: 1.1.1-SNAPSHOT</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Lens</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../gettingstarted/quick-start.html" title="Getting Started">Getting Started</a>
            </li>
                  <li class="none">
                          <a href="../gettingstarted/install-steps.html" title="Install and Run">Install and Run</a>
            </li>
                  <li class="none">
                          <a href="../gettingstarted/pseudo-distributed-setup.html" title="Pseudo Distributed Setup">Pseudo Distributed Setup</a>
            </li>
          </ul>
                       <h5>User Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../user/index.html" title="Lens User Guide">Lens User Guide</a>
            </li>
                  <li class="none">
                          <a href="../user/olap-cube.html" title="OLAP data cube">OLAP data cube</a>
            </li>
                  <li class="none">
                          <a href="../rest.html" title="REST API">REST API</a>
            </li>
                  <li class="none">
                          <a href="../user/cli.html" title="Lens CLI">Lens CLI</a>
            </li>
                  <li class="none">
                          <a href="../user/java-client.html" title="Java Client Library">Java Client Library</a>
            </li>
                  <li class="none">
                          <a href="../user/jdbc-client.html" title="JDBC Client">JDBC Client</a>
            </li>
                  <li class="none">
                          <a href="../user/faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Developer Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../developer/design.html" title="Lens Design">Lens Design</a>
            </li>
                  <li class="none">
                          <a href="../developer/driver.html" title="Driver Developer Guide">Driver Developer Guide</a>
            </li>
          </ul>
                       <h5>Admin Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../admin/index.html" title="Admin Overview">Admin Overview</a>
            </li>
                  <li class="none">
            <strong>Deployment</strong>
          </li>
                  <li class="none">
                          <a href="../admin/config-server.html" title="Configuration">Configuration</a>
            </li>
                  <li class="none">
                          <a href="../admin/cli.html" title="Admin CLI">Admin CLI</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                                     <a href="http://www.inmobi.com/" title="inmobi" class="poweredBy">
        <img class="poweredBy"  alt="inmobi" src="../../images/inmobi-logo.jpg"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- ~ --><!-- #%L --><!-- Lens --><!-- %% --><!-- Copyright (C) 2014 Apache Software Foundation --><!-- %% --><!-- Licensed under the Apache License, Version 2.0 (the "License"); --><!-- you may not use this file except in compliance with the License. --><!-- You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, software --><!-- distributed under the License is distributed on an "AS IS" BASIS, --><!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. --><!-- See the License for the specific language governing permissions and --><!-- limitations under the License. --><!-- #L% --><!-- ~ --><div class="section">
<h2>Lens server deployment<a name="Lens_server_deployment"></a></h2>
<p>This document describes the deployment of lens server in a distributed cluster. Make sure you have finished <a href="../gettingstarted/install-steps.html"> Install and run</a> doc, before proceeding.</p>
<p>Lens server requires Hive metastore. Hive server is required if Hive is one of the execution engines.</p>
<p>Typical deployment suggested is depicted in the following diagram</p><img src="../figures/deployment.png" alt="Lens Server deployment" />
<p>It requires HiveMetastore server, HiveServer2 and Lens Server running on different machines.</p>
<div class="section">
<h3>Dependencies and their versions<a name="Dependencies_and_their_versions"></a></h3>
<ul>
<li>Requires java 1.6+</li>
<li>Requires Hadoop cdh3u5+</li>
<li>Requires Hive metastore 0.13+</li>
<li>Requires Hive server2 0.13+</li></ul></div>
<div class="section">
<h3>Restart and recovery<a name="Restart_and_recovery"></a></h3>
<p>Lens server should not have problems with Hive Metastore server, Hive Server2 or Hadoop restarts. Lens server can persist its state before going and recover from previous state upon restart. </p>
<ul>
<li>Recoverability</li>
<li>To enable lens server with recoverability, i.e. to allow users access queries before restart, lens server should be started with lens.server.restart.enabled set to true. Admin can set this to false if no recoverability is required.</li>
<li>Restarting </li>
<li>To start the lens server a fresh lens.server.recover.onrestart should be disabled. If it is true, the server will load its persisted state before restart.</li></ul></div>
<div class="section">
<h3>Server modes<a name="Server_modes"></a></h3>
<p>Lens server can be started in various modes. The server mode can be specified via configuration when it is starting up. Available modes are</p>
<ul>
<li>READ_ONLY : Allows all requests on sesssion resource and Only GET requests on all other resources</li>
<li>METASTORE_READONLY : Allows Only GET requests on metastore service and all other requests on other services</li>
<li>METASTORE_NODROP: DELETE requests on metastore are not accepted, all other requests are accepted</li>
<li>OPEN: This is the default mode. All requests are accepted</li></ul></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2014
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
