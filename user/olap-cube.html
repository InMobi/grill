<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2014-04-04 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Grill - </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20140404" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://inmobi.github.io/grill" id="bannerLeft">
                                        <img src="http://inmobi.github.io/grill/grill-logo.png" alt="Grill Analytics Platform for InMobi" title="Grill Analytics Platform" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
                                  <a href="../.." title="InMobi">InMobi</a>
        &gt;
                          <a href=".././" title="Grill">Grill</a>
        &gt;
    
      </div>
            <div class="xright">        
                    
                 <span id="publishDate">Last Published: 2014-04-04</span>
              &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Grill</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
                          <a href="../gettingstarted/quick-start.html" title="Getting Started">Getting Started</a>
            </li>
                  <li class="none">
                          <a href="../gettingstarted/install-steps.html" title="Install and Run">Install and Run</a>
            </li>
                  <li class="none">
                          <a href="../gettingstarted/pseudo-distributed-setup.html" title="Pseudo Distributed Setup">Pseudo Distributed Setup</a>
            </li>
          </ul>
                       <h5>User Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../user/index.html" title="Grill User Guide">Grill User Guide</a>
            </li>
                  <li class="none">
            <strong>OLAP data cube</strong>
          </li>
                  <li class="none">
                          <a href="../rest.html" title="REST API">REST API</a>
            </li>
                  <li class="none">
                          <a href="../user/cli.html" title="Grill CLI">Grill CLI</a>
            </li>
                  <li class="none">
                          <a href="../user/java-client.html" title="Java Client Library">Java Client Library</a>
            </li>
                  <li class="none">
                          <a href="../user/jdbc-client.html" title="JDBC Client">JDBC Client</a>
            </li>
          </ul>
                       <h5>Developer Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../developer/design.html" title="Grill Design">Grill Design</a>
            </li>
                  <li class="none">
                          <a href="../developer/driver.html" title="Driver Developer Guide">Driver Developer Guide</a>
            </li>
          </ul>
                       <h5>Admin Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="../admin/index.html" title="Admin Overview">Admin Overview</a>
            </li>
                  <li class="none">
                          <a href="../admin/deployment.html" title="Deployment">Deployment</a>
            </li>
                  <li class="none">
                          <a href="../admin/config-server.html" title="Configuration">Configuration</a>
            </li>
                  <li class="none">
                          <a href="../admin/cli.html" title="Admin CLI">Admin CLI</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                    <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                                                                                                                                     <a href="http://www.inmobi.com/" title="inmobi" class="poweredBy">
        <img class="poweredBy"  alt="inmobi" src="../../images/inmobi-logo.jpg"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- ~ --><!-- #%L --><!-- Grill --><!-- %% --><!-- Copyright (C) 2014 Inmobi --><!-- %% --><!-- Licensed under the Apache License, Version 2.0 (the "License"); --><!-- you may not use this file except in compliance with the License. --><!-- You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, software --><!-- distributed under the License is distributed on an "AS IS" BASIS, --><!-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. --><!-- See the License for the specific language governing permissions and --><!-- limitations under the License. --><!-- #L% --><!-- ~ --><div class="section">
<h2>OLAP Data cube concepts<a name="OLAP_Data_cube_concepts"></a></h2>
<ul>
<li><a href="#OLAP_Data_cube_concepts">OLAP Data cube concepts</a>
<ul>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Metastore_model">Metastore model</a>
<ul>
<li><a href="#Storage">Storage</a></li>
<li><a href="#Cube">Cube</a>
<ul>
<li><a href="#Measure">Measure</a></li>
<li><a href="#Dimension">Dimension</a></li></ul></li>
<li><a href="#Fact_Tables">Fact Tables</a></li>
<li><a href="#Dimension_tables">Dimension tables</a></li>
<li><a href="#Update_Period">Update Period</a></li>
<li><a href="#Storage_tables">Storage tables</a>
<ul>
<li><a href="#Fact_storage_table">Fact storage table</a></li>
<li><a href="#Dimension_storage_table">Dimension storage table</a></li>
<li><a href="#Naming_convention">Naming convention</a></li>
<li><a href="#Partition">Partition</a></li></ul></li></ul></li>
<li><a href="#Metastore_API">Metastore API</a></li>
<li><a href="#Query_Language">Query Language</a></li>
<li><a href="#Query_API">Query API</a></li></ul></li></ul>
<div class="section">
<h3>Introduction<a name="Introduction"></a></h3>
<p>Typical data layout in a data ware house is to have fact data rolled up with time and reduce dimensions at each level. Fact data will have dimension keys sothat it can be joined with actual dimension tables to get more information on dimension attributes.</p>
<p>The typical data layout is depicted in the following diagram.</p><img src="../figures/data-layout.png" alt="Fact data and dimension data" />
<p>Grill provides an abstraction to represent above layout, and allows user to define schema of the data at conceptual level and also query the same, without knowing the physical storages and rollups, which is described in below sections.</p></div>
<div class="section">
<h3>Metastore model<a name="Metastore_model"></a></h3>
<p>Metastore model introduces constructs Storage, Cube, Fact table and Dimension table, Partition.</p>
<div class="section">
<h4>Storage<a name="Storage"></a></h4>
<p>Storage represents a physical storage. It can be Hadoop File system or a data base. It is defined by name, endpoint and properties associated with.</p></div>
<div class="section">
<h4>Cube<a name="Cube"></a></h4>
<p>A cube is a set of dimensions and measures in a particular subject, which users can query. Cubes also have timed dimensions, which can be used query cube for a time range.</p>
<div class="section">
<h5>Measure<a name="Measure"></a></h5>
<p>A measure is a quantity that you are interested in measuring.</p>
<p>Measure will have name, type, default aggregator, a format string, start time and end time. Measure can be simple column measure or an expression measure which is associated with an expression.</p></div>
<div class="section">
<h5>Dimension<a name="Dimension"></a></h5>
<p>A dimension is an attribute, or set of attributes, by which you can divide measures into sub-categories.</p>
<ul>
<li>A dimension can be as simple as having name and type. // BaseDimension</li>
<li>A dimension can also refer to a dimension table // ReferencedDimension</li>
<li>A dimension can be associated with an expression // ExpressionDimension</li>
<li>A dimension can be a hierarchy of dimensions. // HierachicalDimension</li>
<li>A dimension can define all the possible values it can take. // InlineDimension</li></ul></div></div>
<div class="section">
<h4>Fact Tables<a name="Fact_Tables"></a></h4>
<p>A fact table is table having columns. Columns are subset of measures and dimensions. The fact table is associated with cube, specified by name. Fact can be available in multiple storages.</p></div>
<div class="section">
<h4>Dimension tables<a name="Dimension_tables"></a></h4>
<p>A table with list of columns. It can have references to other dimension tables. Theses tables can be joined with cubes while querying. These tables can be available in multiple storages. </p></div>
<div class="section">
<h4>Update Period<a name="Update_Period"></a></h4>
<p>Fact or dimension tables can be updated at regular intervals. Supports SECONDLY, MINUTELY, HOURLY, DAILY, WEEKLY, MONTHLY, QUARTERLY, YEARLY update periods.</p></div>
<div class="section">
<h4>Storage tables<a name="Storage_tables"></a></h4>
<p>The physical tables, either fact or dimension tables, present on a storage. It will have the same schema as fact/dimension table definition. Each physical table can have its own storage descriptor. These tables can be partitioned by columns. Usually partition columns are dimensions. They can be timed dimensions or other dimensions.</p>
<div class="section">
<h5>Fact storage table<a name="Fact_storage_table"></a></h5>
<p>Fact storage table is the physical fact table for the associated storage, for the specified update period. The storage table can be associated with multiple update periods.</p></div>
<div class="section">
<h5>Dimension storage table<a name="Dimension_storage_table"></a></h5>
<p>Dimension storage table is the physical dimension table for the associated storage. Dimension storage table can have snapshot dumps at specified regular intervals or a table with no dumps, so the storage table can have zero or one update period.</p></div>
<div class="section">
<h5>Naming convention<a name="Naming_convention"></a></h5>
<p>The name of the storage table is storage name followed fact/dimensions table, seperated by '_&quot;.</p>
<p>Ex: For fact table name: FACT1, for storage:S1, the storage table name is S1_FACT1 For dimension table name: DIM1, for storage:S1, the storage table name is S1_DIM1</p></div>
<div class="section">
<h5>Partition<a name="Partition"></a></h5>
<p>Each partition on the storage table can have its own storage descriptor.</p></div></div></div>
<div class="section">
<h3>Metastore API<a name="Metastore_API"></a></h3>
<p>GRILL provides <a href="../resource_MetastoreResource.html"> REST api</a>, <a href="../apidocs/com/inmobi/grill/client/GrillMetadataClient.html"> Java client api</a> and <a href="./cli.html#OLAP_Data_cube_metadata_management"> CLI</a> for doing CRUD on metastore.</p></div>
<div class="section">
<h3>Query Language<a name="Query_Language"></a></h3>
<p>User can query the grill through OLAP Cube QL, which is subset of Hive QL.</p>
<p>Here is the grammar:</p>
<div class="source">
<pre>
  CUBE SELECT [DISTINCT] select_expr, select_expr, ...
  FROM cube_table_reference
  WHERE [where_condition AND] TIME_RANGE_IN(from, to)
  [GROUP BY col_list]
  [HAVING having_expr]
  [ORDER BY colList]
  [LIMIT number]
  
  cube_table_reference:
  cube_table_factor
  | join_table
  join_table:
  cube_table_reference JOIN cube_table_factor [join_condition]
  | cube_table_reference {LEFT|RIGHT|FULL} [OUTER] JOIN cube_table_reference [join_condition]
  cube_table_factor:
  cube_name or dimension_name [alias]
  | ( cube_table_reference )
  join_condition:
  ON equality_expression ( AND equality_expression )*
  equality_expression:
  expression = expression
  colOrder: ( ASC | DESC )
  colList : colName colOrder? (',' colName colOrder?)*
  
  TIME_RANGE_IN(from, to) : The time range inclusive of &#x2018;from&#x2019; and exclusive of &#x2018;to&#x2019;.
</pre></div>
<p>OLAP Cube QL supports all the functions that hive supports as documented in Hive Functions</p>
<p>Query engine provides following features :</p>
<ul>
<li>Figure out which dimension tables contain data needed to satisfy the query.</li>
<li>Figure out the exact fact tables and their partitions based on the time range in the query. While doing this, it will try to minimize computation needed to complete the queries.</li>
<li>If No Join condition is passed for Joins,join condition will be inferred from the relationship definition.</li>
<li>Projected fields can be added to group by col list automatically, if not present and if the group by keys specified are not projected, they can be projected</li>
<li>Automatically add aggregate functions to measures specified as measure's default aggregate.</li></ul></div>
<div class="section">
<h3>Query API<a name="Query_API"></a></h3>
<p>GRILL provides <a href="../resource_QueryServiceResource.html"> REST api</a>, <a href="../apidocs/com/inmobi/grill/client/GrillStatement.html"> Java client api</a>, <a href="./jdbc-client.html"> JDBC client</a> and <a href="./cli.html#Query_Management"> CLI</a> for doing submitting queries, checking status and fetching results.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2014
                        <a href="http://www.inmobi.com">Inmobi</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
