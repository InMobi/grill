<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-02-26
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20150226" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Lens &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".././" id="bannerLeft">
                                                                                                <img src="../images/apache-lens-logo.png"  alt="Lens Analytics Platform" height="54px"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://incubator.apache.org" id="bannerRight">
                                                                                                <img src="../images/apache-incubator-logo.png"  alt="Apache Incubator"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org" class="externalLink" title="Apache">
        Apache</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href=".././" title="Lens">
        Lens</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2015-02-26</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 2.1.0-inm-SNAPSHOT</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Lens</li>
                                
      <li>
    
                          <a href="../index.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                  
      <li>
    
                          <a href="../lenshome/quick-start.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Installing and Running Lens</a>
          </li>
                  
      <li>
    
                          <a href="../lenshome/pseudo-distributed-setup.html" title="Pseudo Distributed Setup">
          <i class="none"></i>
        Pseudo Distributed Setup</a>
            </li>
                              <li class="nav-header">Releases</li>
                                
      <li>
    
                          <a href="../releases/download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                  
      <li>
    
                          <a href="../releases/compatibility.html" title="Compatibility">
          <i class="none"></i>
        Compatibility</a>
            </li>
                  
      <li>
    
                          <a href="../releases/release-history.html" title="All Releases">
          <i class="none"></i>
        All Releases</a>
            </li>
                              <li class="nav-header">User Documentation</li>
                                
      <li>
    
                          <a href="../user/index.html" title="Lens User Guide">
          <i class="none"></i>
        Lens User Guide</a>
            </li>
                  
      <li>
    
                          <a href="../user/olap-cube.html" title="OLAP data cube">
          <i class="none"></i>
        OLAP data cube</a>
            </li>
                  
      <li>
    
                          <a href="../rest.html" title="REST API">
          <i class="none"></i>
        REST API</a>
            </li>
                  
      <li>
    
                          <a href="../user/cli.html" title="Lens CLI">
          <i class="none"></i>
        Lens CLI</a>
            </li>
                  
      <li>
    
                          <a href="../user/java-client.html" title="Java Client Library">
          <i class="none"></i>
        Java Client Library</a>
            </li>
                  
      <li>
    
                          <a href="../user/jdbc-client.html" title="JDBC Client">
          <i class="none"></i>
        JDBC Client</a>
            </li>
                  
      <li>
    
                          <a href="../user/ml.html" title="Lens ML">
          <i class="none"></i>
        Lens ML</a>
            </li>
                  
      <li>
    
                          <a href="../user/faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Developer Documentation</li>
                                
      <li>
    
                          <a href="../developer/contribute.html" title="Contributor Guide">
          <i class="none"></i>
        Contributor Guide</a>
            </li>
                  
      <li>
    
                          <a href="../developer/commit.html" title="Committer Guide">
          <i class="none"></i>
        Committer Guide</a>
            </li>
                  
      <li>
    
                          <a href="../developer/design.html" title="Lens Design">
          <i class="none"></i>
        Lens Design</a>
            </li>
                  
      <li>
    
                          <a href="../developer/driver.html" title="Driver Developer Guide">
          <i class="none"></i>
        Driver Developer Guide</a>
            </li>
                              <li class="nav-header">Admin Documentation</li>
                                
      <li>
    
                          <a href="../admin/index.html" title="Admin Overview">
          <i class="none"></i>
        Admin Overview</a>
            </li>
                  
      <li>
    
                          <a href="../admin/deployment.html" title="Deployment">
          <i class="none"></i>
        Deployment</a>
            </li>
                  
      <li>
    
                          <a href="../admin/config-server.html" title="Configuration">
          <i class="none"></i>
        Configuration</a>
            </li>
                  
      <li>
    
                          <a href="../admin/cli.html" title="Admin CLI">
          <i class="none"></i>
        Admin CLI</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                      
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                    
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="http://www.apache.org/" title="ASF" class="builtBy">
        <img class="builtBy"  alt="ASF" src="../images/logos/maven-feather.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!--  --><!-- Licensed to the Apache Software Foundation (ASF) under one --><!-- or more contributor license agreements.  See the NOTICE file --><!-- distributed with this work for additional information --><!-- regarding copyright ownership.  The ASF licenses this file --><!-- to you under the Apache License, Version 2.0 (the --><!-- "License"); you may not use this file except in compliance --><!-- with the License.  You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, --><!-- software distributed under the License is distributed on an --><!-- "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY --><!-- KIND, either express or implied.  See the License for the --><!-- specific language governing permissions and limitations --><!-- under the License. --><!--  --><div class="section">
<h2><a name="Installing_and_Running_Lens"></a>Installing and Running Lens</h2>
<ul>
<li><a href="#Installing_and_Running_Lens">Installing and Running Lens</a>
<ul>
<li><a href="#Installation">Installation</a>
<ul>
<li><a href="#Downloading">Downloading</a></li>
<li><a href="#Installing_Lens">Installing Lens</a></li>
<li><a href="#Installing_Hive">Installing Hive</a></li></ul></li>
<li><a href="#Running_Lens">Running Lens</a>
<ul>
<li><a href="#Running_Lens_Server">Running Lens Server</a>
<ul>
<li><a href="#Structure_of_Lens_server_installation_directory">Structure of Lens server installation directory</a></li>
<li><a href="#Driver_configuration">Driver configuration</a></li>
<li><a href="#Setting_Environment_Variables">Setting Environment Variables</a></li>
<li><a href="#Starting_Lens_server">Starting Lens server</a></li></ul></li>
<li><a href="#Running_Lens_Client">Running Lens Client</a>
<ul>
<li><a href="#Structure_of_Lens_client_installation_directory">Structure of Lens client installation directory</a></li>
<li><a href="#Starting_Lens_Client">Starting Lens Client</a></li></ul></li></ul></li></ul></li></ul>
<div class="section">
<h3><a name="Installation"></a>Installation</h3>
<div class="section">
<h4><a name="Downloading"></a>Downloading</h4>
<p>Download a release of Apache Lens from <a href="/releases/download.html">here</a>. Lens depends on Hive forked from Apache Hive. Download a release of hive from <a class="externalLink" href="https://github.com/InMobi/hive/releases">https://github.com/InMobi/hive/releases</a>.</p></div>
<div class="section">
<h4><a name="Installing_Lens"></a>Installing Lens</h4>
<p>Unpack the tarball.</p>
<div class="source">
<pre>
  tar zxvf apache-lens-&lt;verison&gt;-bin.tar.gz
</pre></div>
<p>This will result in the creation of a directory named apache-lens-<i>verison</i>-bin (where <i>version</i> is the release number).</p>
<div class="source">
<pre>  apache-lens-&lt;verison&gt;-bin
  &#x251c;&#x2500;&#x2500; client
  &#x251c;&#x2500;&#x2500; LICENSE
  &#x251c;&#x2500;&#x2500; NOTICE
  &#x251c;&#x2500;&#x2500; README
  &#x251c;&#x2500;&#x2500; DISCLAIMER
  &#x251c;&#x2500;&#x2500; LICENSE*
  &#x2514;&#x2500;&#x2500; server</pre></div>
<p><i>apache-lens-&lt;verison</i>-bin/client&gt; can be used as the Lens client installation directory and <i>apache-lens-&lt;verison</i>-bin/server&gt; can be used as the Lens server installation directory to <a href="#Running_Lens">run</a> lens client and lens server respectively.</p></div>
<div class="section">
<h4><a name="Installing_Hive"></a>Installing Hive</h4>
<p>Unpack the tarball.</p>
<div class="source">
<pre>
  tar -xzvf hive-hive-release-&lt;version&gt;-inm.tar.gz
</pre></div>
<p>This will result in the creation of a directory named hive-hive-release-<i>version</i>-inm. This directory contains hive source code. Build hive binary using below commands.</p>
<div class="source">
<pre>
  cd hive-hive-release-&lt;version&gt;-inm
  mvn clean package -DskipTests -Phadoop-2,dist
</pre></div>
<p>This will result in creation of hive binary, which can be found at location packaging/target/apache-hive-<i>version</i>-inm-bin.tar.gz. Unpack the created hive tarball in the directory where you want to install hive.</p>
<div class="source">
<pre>  tar zxvf apache-hive-&lt;version&gt;-inm-bin.tar.gz</pre></div>
<p>This will result in creation of directory apache-hive-<i>version</i>-inm-bin. Set HIVE_HOME.</p>
<div class="source">
<pre>  cd apache-hive-&lt;version&gt;-inm-bin
  export HIVE_HOME=`pwd`</pre></div></div></div>
<div class="section">
<h3><a name="Running_Lens"></a>Running Lens</h3>
<div class="section">
<h4><a name="Running_Lens_Server"></a>Running Lens Server</h4>
<div class="section">
<h5><a name="Structure_of_Lens_server_installation_directory"></a>Structure of Lens server installation directory</h5>
<div class="source">
<pre>
  &#x251c;&#x2500;&#x2500; bin
  &#x2502;   &#x251c;&#x2500;&#x2500; lens-config.sh
  &#x2502;   &#x2514;&#x2500;&#x2500; lens-ctl
  &#x251c;&#x2500;&#x2500; conf
  &#x2502;   &#x251c;&#x2500;&#x2500; hivedriver-site.xml
  &#x2502;   &#x251c;&#x2500;&#x2500; jdbcdriver-site.xml
  &#x2502;   &#x251c;&#x2500;&#x2500; lens-env.sh
  &#x2502;   &#x251c;&#x2500;&#x2500; lens-site.xml
  &#x2502;   &#x2514;&#x2500;&#x2500; log4j.properties
  &#x251c;&#x2500;&#x2500; conf-pseudo-distr
  &#x2502;   &#x251c;&#x2500;&#x2500; hivedriver-site.xml
  &#x2502;   &#x251c;&#x2500;&#x2500; jdbcdriver-site.xml
  &#x2502;   &#x251c;&#x2500;&#x2500; lens-env.sh
  &#x2502;   &#x251c;&#x2500;&#x2500; lens-site.xml
  &#x2502;   &#x2514;&#x2500;&#x2500; log4j.properties
  &#x2514;&#x2500;&#x2500; webapp
      &#x2514;&#x2500;&#x2500; lens-server.war</pre></div>
<p>We will refer to Lens server installation directory as <i>lens-install-dir</i> in rest of the page. The <i>bin</i> folder provides <i>lens-ctl</i> which provides commands for starting and stopping the lens server. Other .sh files in <i>bin</i> are the scripts used by lens-ctl.</p>
<p>The server war is available in webapp/ folder, which would be expanded in the same directory. War would be expanded either by postinst script of debian or if debian is not used for installation, then it will be expanded on first server start. The lib folder contains all the dependent libraries.</p>
<p>Server configuration can be overridden in lens-site.xml. See <a href="../admin/config.html">server configuration</a> for all the configuration parameters available and their default values. You can set up the environment variables such as JAVA_HOME, java options, heap size and etc in lens-env.sh.</p>
<p>The server logs go into logs/ folder in the <i>lens-install-dir</i> directory, unless overridden. The proper logging configuration can be provided in log4j.properties file.</p></div>
<div class="section">
<h5><a name="Driver_configuration"></a>Driver configuration</h5>
<p>If server has HiveDriver as one of the drivers, the configuration for hive driver should be set up in hive-site.xml. All the available configuration of the HiveDriver can be found <a href="../admin/hivedriver-config.html">here</a>.</p></div>
<div class="section">
<h5><a name="Setting_Environment_Variables"></a>Setting Environment Variables</h5>
<p>Before starting the server, you need to set <b>HADOOP_HOME</b> and <b>HIVE_HOME</b> environment variables. These should point to the Hadoop and Hive installation directories.</p></div>
<div class="section">
<h5><a name="Starting_Lens_server"></a>Starting Lens server</h5>
<p>Once env variables are set, you can use the following command to start the server:</p>
<div class="source">
<pre>
  bin/lens-ctl start
</pre></div>
<p>Once the server is up, you can go to the browser and open the server <i>baseurl</i>. You would see a message saying &#x2018;Lens server is up&#x2019;.</p>
<p>To check all other services are up and running, try <i>baseurl</i>/session, <i>baseurl</i>/queryapi, <i>baseurl</i>/metastore and all of them will respond with respective service is up.</p>
<p>You can try out examples described below or use the REST api <i>link</i> for each service.</p>
<p>Lens server also comes with simple UI service which can be used to browse catalog and submit queries. Once the server starts up, you can open the UI service on http://<i>serverhost</i>:19999/index.html and browse.</p>
<p>The command to stop the server:</p>
<div class="source">
<pre>
  bin/lens-ctl stop
</pre></div></div></div>
<div class="section">
<h4><a name="Running_Lens_Client"></a>Running Lens Client</h4>
<div class="section">
<h5><a name="Structure_of_Lens_client_installation_directory"></a>Structure of Lens client installation directory</h5>
<div class="source">
<pre>  &#x251c;&#x2500;&#x2500; bin
  &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; lens-cli.sh
  &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; lens-config.sh
  &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; run-examples.sh
  &#x251c;&#x2500;&#x2500; conf
  &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; lens-client-site.xml
  &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; lens-env.sh
  &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; log4j.properties
  &#x251c;&#x2500;&#x2500; examples
  &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; data
  &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; dim1_local
  &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; dim1-local.data
  &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; dim2_local
  &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0;     &#x2514;&#x2500;&#x2500; dim2-local.data
  &#x2502;&#xa0;&#xa0; &#x251c;&#x2500;&#x2500; queries
  &#x2502;&#xa0;&#xa0; &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; dimension-queries.txt
  &#x2502;&#xa0;&#xa0; &#x2514;&#x2500;&#x2500; resources
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; db-storage.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; dim1-local-part.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; dim1-storage-tables.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; dim2-local-part.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; dim2-storage-tables.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; dim_table.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; dim_table2.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; fact1-storage-tables.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; fact1.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; fact2-storage-tables.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; fact2.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; local-cluster-storage.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; local-storage.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; rawfact-storage-tables.xml
  &#x2502;&#xa0;&#xa0;     &#x251c;&#x2500;&#x2500; rawfact.xml
  &#x2502;&#xa0;&#xa0;     &#x2514;&#x2500;&#x2500; sample-cube.xml
  &#x2514;&#x2500;&#x2500; lib
      &#x251c;&#x2500;&#x2500; ST4-4.0.4.jar
       &#x2026;&#x2026;.
      &#x2514;&#x2500;&#x2500; xmlenc-0.52.jar</pre></div>
<p>The <i>bin</i> folder provides various scripts for the client.</p>
<ul>
<li><b>run-examples.sh</b> provides commands to run examples - create a sample metastore, populate metastore with sample data and run some example queries. This would validate your server is all up and running fine.</li>
<li><b>lens-cli.sh</b> provides CLI shell for running various commands. Its usage is more described in CLI user guide.</li>
<li><b>lens-config.sh</b> is used internally by other scripts</li></ul>
<p>Client configuration can be overridden in lens-client-site.xml. See <a href="../user/client-config.html">client configuration</a> for all the configuration parameters available and their default values. You can set up the environment variables such as JAVA_HOME, java options, heap size and etc in lens-env.sh.</p>
<p>The client logs go into logs/ folder in the install directory, unless overridden. The proper logging configuration can be provided in log4j.properties file.</p>
<p>Examples folder contains sample resource files, data files and query files which will be used by <b>run-examples.sh</b> script.</p></div>
<div class="section">
<h5><a name="Starting_Lens_Client"></a>Starting Lens Client</h5>
<div class="source">
<pre>
  bin/lens-cli.sh
</pre></div></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2014-2015
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
